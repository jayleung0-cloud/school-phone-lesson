<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰¹å·¥ä»»å‹™ï¼šæ ¡åœ’æ‰‹æ©Ÿæ”»é˜²æˆ° (å¤§å­—æŠ•å½±ç‰ˆ)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500;700;900&display=swap');
        
        html { font-size: 22px; } /* æŠ•å½±å°ˆç”¨è¶…å¤§åŸºæº–å­—é«” */
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #020617;
            color: #f8fafc;
            overflow-x: hidden;
        }

        .neon-green { color: #10b981; text-shadow: 0 0 15px rgba(16, 185, 129, 0.6); }
        .neon-orange { color: #f97316; text-shadow: 0 0 15px rgba(249, 115, 22, 0.6); }

        .chart-container {
            position: relative;
            width: 100%;
            height: 500px;
            background: rgba(15, 23, 42, 0.9);
            border-radius: 3rem;
            padding: 2.5rem;
            border: 4px solid #1e293b;
        }

        .card-map {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            border-width: 4px;
        }
        .card-map:hover { transform: scale(1.1); background-color: #1e293b; z-index: 10; }

        .writing-option-active {
            @apply border-orange-500 bg-orange-900/80 ring-8 ring-orange-500/20 text-white scale-105;
        }

        .progress-bar-inner {
            transition: width 0.5s ease-in-out;
        }

        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide { animation: slideIn 0.6s ease-out forwards; }
    </style>

    <!-- 
        Application Structure Plan:
        1. MISSION BRIEFING: Large-scale visual hook based on "Zombie vs Warrior" scenario.
        2. GLOBAL RADAR: 8-region grid mapping all intelligence from the PDF.
        3. INTELLIGENCE HUB: PISA data and national security implications (Cyber Security).
        4. LOGIC TRAINING (QUIZ): 5-step quiz with a dynamic progress bar for classroom interaction.
        5. ARGUMENT LAB 3.0: High-contrast builder with specific counter-arguments from the PDF.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="p-4 md:p-12">

    <!-- Header & Hero -->
    <header class="mb-32 text-center animate-slide">
        <div class="inline-block px-10 py-3 rounded-full border-4 border-orange-500 text-orange-500 text-2xl font-black mb-10 tracking-[0.3em] uppercase">
            TOP SECRET: AGENT MISSION
        </div>
        <h1 class="text-8xl md:text-[10rem] font-black mb-10 leading-none tracking-tighter italic">
            æ ¡åœ’æ‰‹æ©Ÿ<br><span class="neon-green">å…¨çƒæƒ…å ±æˆ°</span>
        </h1>
        <p class="text-4xl text-slate-400 max-w-5xl mx-auto font-bold leading-tight mb-12">
            åˆ†æ 8 åœ‹æƒ…å ±ï¼Œåœ¨ã€Œè‡ªç”±ã€èˆ‡ã€Œç´€å¾‹ã€ä¹‹é–“ï¼Œ<br>æ§‹å»ºä½ çš„è­°è«–æ–‡é‹¼éµé˜²ç·šï¼
        </p>
        
        <!-- Zombie vs Warrior Visual Wrapper -->
        <div class="flex justify-center gap-10 mt-16 max-w-6xl mx-auto">
            <div class="flex-1 bg-red-900/20 p-8 rounded-3xl border-2 border-red-500/30">
                <div class="text-6xl mb-4">ğŸ§Ÿâ€â™‚ï¸</div>
                <h4 class="text-red-400 font-black text-2xl">æ‰‹æ©Ÿå–ªå±</h4>
                <p class="text-lg text-slate-500">é€£çµäº†ä¸–ç•Œï¼Œå»æ–·ç·šäº†å½¼æ­¤ã€‚</p>
            </div>
            <div class="flex-1 bg-emerald-900/20 p-8 rounded-3xl border-2 border-emerald-500/30">
                <div class="text-6xl mb-4">ğŸ›¡ï¸</div>
                <h4 class="text-emerald-400 font-black text-2xl">æœªä¾†æˆ°å£«</h4>
                <p class="text-lg text-slate-500">é§•é¦­ç§‘æŠ€ï¼Œè€Œéè¢«ç§‘æŠ€å¥´å½¹ã€‚</p>
            </div>
        </div>
    </header>

    <!-- Section 1: Interactive World Radar (8 Regions) -->
    <section class="mb-40">
        <div class="text-center mb-16">
            <h2 class="text-6xl font-black text-white inline-block bg-slate-800 px-12 py-6 rounded-[3rem] shadow-2xl border-b-8 border-orange-600">
                ğŸ—ºï¸ å…¨çƒæƒ…å ±é›·é” (Intel)
            </h2>
        </div>
        
        <!-- Grid optimized for 8 items -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-8 mb-16 max-w-7xl mx-auto">
            <div onclick="reveal('france')" class="card-map bg-slate-900 p-10 rounded-[3rem] border-slate-700 text-center hover:border-blue-500">
                <div class="text-8xl mb-4">ğŸ‡«ğŸ‡·</div>
                <div class="text-3xl font-black">æ³•åœ‹</div>
                <div class="text-sm text-blue-500 mt-2 font-black uppercase tracking-widest">æ•¸ç¢¼é¿é¢¨æ¸¯</div>
            </div>
            <div onclick="reveal('china')" class="card-map bg-slate-900 p-10 rounded-[3rem] border-slate-700 text-center hover:border-red-500">
                <div class="text-8xl mb-4">ğŸ‡¨ğŸ‡³</div>
                <div class="text-3xl font-black">ä¸­åœ‹</div>
                <div class="text-sm text-red-500 mt-2 font-black uppercase tracking-widest">äº”é …ç®¡ç†</div>
            </div>
            <div onclick="reveal('netherlands')" class="card-map bg-slate-900 p-10 rounded-[3rem] border-slate-700 text-center hover:border-orange-500">
                <div class="text-8xl mb-4">ğŸ‡³ğŸ‡±</div>
                <div class="text-3xl font-black">è·è˜­</div>
                <div class="text-sm text-orange-500 mt-2 font-black uppercase tracking-widest">å°ˆæ³¨ç¤¾äº¤</div>
            </div>
            <div onclick="reveal('singapore')" class="card-map bg-slate-900 p-10 rounded-[3rem] border-slate-700 text-center hover:border-emerald-500">
                <div class="text-8xl mb-4">ğŸ‡¸ğŸ‡¬</div>
                <div class="text-3xl font-black">æ–°åŠ å¡</div>
                <div class="text-sm text-emerald-500 mt-2 font-black uppercase tracking-widest">æ–·ç¶²é‡é€£</div>
            </div>
            <div onclick="reveal('uk')" class="card-map bg-slate-900 p-10 rounded-[3rem] border-slate-700 text-center hover:border-indigo-500">
                <div class="text-8xl mb-4">ğŸ‡¬ğŸ‡§</div>
                <div class="text-3xl font-black">è‹±åœ‹</div>
                <div class="text-sm text-indigo-500 mt-2 font-black uppercase tracking-widest">é‡å»ºæ¬Šå¨</div>
            </div>
            <div onclick="reveal('estonia')" class="card-map bg-slate-800 p-10 rounded-[3rem] border-slate-700 text-center hover:border-cyan-400">
                <div class="text-8xl mb-4">ğŸ‡ªğŸ‡ª</div>
                <div class="text-3xl font-black">æ„›æ²™å°¼äº</div>
                <div class="text-sm text-cyan-400 mt-2 font-black uppercase tracking-widest">æ•¸ç¢¼é ˜è¢–</div>
            </div>
            <div onclick="reveal('usa')" class="card-map bg-slate-900 p-10 rounded-[3rem] border-slate-700 text-center hover:border-white">
                <div class="text-8xl mb-4">ğŸ‡ºğŸ‡¸</div>
                <div class="text-3xl font-black">ç¾åœ‹</div>
                <div class="text-sm text-slate-400 mt-2 font-black uppercase tracking-widest">å®‰å…¨è¯çµ¡</div>
            </div>
            <div onclick="reveal('sweden')" class="card-map bg-slate-900 p-10 rounded-[3rem] border-slate-700 text-center hover:border-yellow-500">
                <div class="text-8xl mb-4">ğŸ‡¸ğŸ‡ª</div>
                <div class="text-3xl font-black">ç‘å…¸</div>
                <div class="text-sm text-yellow-500 mt-2 font-black uppercase tracking-widest">å¹³è¡¡åæ€</div>
            </div>
        </div>

        <!-- Intel Result Box -->
        <div id="intel-box" class="bg-slate-900 rounded-[4rem] p-16 md:p-24 border-8 border-slate-800 hidden animate-slide shadow-2xl">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-20">
                <div class="text-center lg:text-left">
                    <div id="i-flag" class="text-[14rem] mb-6 leading-none">ğŸš©</div>
                    <h3 id="i-country" class="text-7xl font-black mb-4">åœ‹å®¶/åœ°å€</h3>
                    <div id="i-stance" class="inline-block px-10 py-3 bg-red-600 text-white text-3xl font-black rounded-3xl mb-10">ç¦æ­¢</div>
                </div>
                <div class="flex flex-col justify-center space-y-12">
                    <div>
                        <h4 class="text-orange-500 font-black text-3xl uppercase tracking-widest mb-4">æƒ…å ±æ‘˜è¦ (Brief)</h4>
                        <p id="i-desc" class="text-4xl text-white leading-tight font-medium">è«‹åœ¨ä¸Šæ–¹é¸æ“‡åœ°å€...</p>
                    </div>
                    <div class="bg-slate-800 p-12 rounded-[3.5rem] border-l-[20px] border-emerald-500">
                        <h5 class="text-emerald-400 font-black text-2xl mb-4 uppercase">å°æ‡‰åƒ¹å€¼ (Value)</h5>
                        <p id="i-value" class="text-4xl text-slate-100 font-bold leading-snug">è‡ªå¾‹ã€å®ˆæ³•</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Data & National Security -->
    <section class="mb-40 max-w-7xl mx-auto">
        <div class="text-center mb-16">
            <h2 class="text-6xl font-black text-white mb-6">ğŸ“Š æƒ…å ±æ•¸æ“šä¸­å¿ƒ</h2>
            <p class="text-4xl text-slate-400">æ•¸æ“šæ˜¯è­°è«–æ–‡æœ€å¼·çš„ã€Œå­å½ˆã€</p>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-12">
            <div class="lg:col-span-3">
                <div class="chart-container">
                    <canvas id="pisaBigChart"></canvas>
                </div>
            </div>
            <div class="lg:col-span-2 space-y-8">
                <div class="bg-indigo-900/40 p-12 rounded-[3.5rem] border-4 border-indigo-500/50">
                    <h4 class="text-indigo-300 font-black text-3xl mb-4">ğŸ›¡ï¸ ç¶²çµ¡å®‰å…¨ä»»å‹™</h4>
                    <p class="text-2xl text-slate-300 leading-relaxed font-bold">
                        æè¡›ç¶²çµ¡ç©ºé–“å®‰å…¨æ˜¯ã€Œç¸½é«”åœ‹å®¶å®‰å…¨è§€ã€çš„ä¸€éƒ¨åˆ†ã€‚å€‹äººçš„å°ˆæ³¨åŠ›èˆ‡è³‡è¨Šç´ é¤Šï¼Œæ˜¯åœ‹å®¶å¼·ç››çš„åŸºç¤ã€‚
                    </p>
                </div>
                <div class="bg-orange-900/40 p-12 rounded-[3.5rem] border-4 border-orange-500/50">
                    <h4 class="text-orange-300 font-black text-3xl mb-4">âš–ï¸ å®ˆæ³•èˆ‡è²¬ä»»</h4>
                    <p class="text-2xl text-slate-300 leading-relaxed font-bold">
                        ç¶²çµ¡éå¤–ä¹‹åœ°ã€‚æ‹’çµ•ç¶²çµ¡æ¬ºå‡Œèˆ‡å‡è³‡è¨Šï¼Œé€™ä¸åƒ…æ˜¯å€‹äººæ“å®ˆï¼Œæ›´æ˜¯ç¶­è­·ç¤¾æœƒç©©å®šçš„æ³•å¾‹ç¾©å‹™ã€‚
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: Logic Training Camp (Quiz with Progress) -->
    <section id="quiz-section" class="mb-40 bg-slate-900 p-16 md:p-24 rounded-[5rem] border-8 border-indigo-600 shadow-[0_0_100px_rgba(79,70,229,0.3)]">
        <div class="flex justify-between items-end mb-12">
            <div>
                <h2 class="text-6xl font-black text-white mb-4">ğŸ§  ç‰¹å·¥é‚è¼¯æ¸¬è©¦</h2>
                <p class="text-3xl text-indigo-300">å›ç­”å•é¡Œï¼Œæå‡ä½ çš„è¾¯è«–ç­‰ç´šï¼</p>
            </div>
            <div class="text-right">
                <div class="text-4xl font-black text-white mb-2"><span id="q-current">0</span> / <span id="q-total">5</span></div>
                <div class="w-64 h-8 bg-slate-800 rounded-full overflow-hidden border-2 border-slate-700">
                    <div id="q-progress" class="progress-bar-inner h-full bg-gradient-to-r from-indigo-500 to-cyan-400" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div id="quiz-ui" class="max-w-5xl mx-auto">
            <div class="bg-black p-16 rounded-[4rem] border-4 border-slate-800 mb-12 text-center min-h-[350px] flex items-center justify-center">
                <h3 id="quiz-text" class="text-5xl font-black leading-tight">æº–å‚™å¥½æ¥æ”¶ä½ çš„é‚è¼¯æŒ‘æˆ°äº†å—ï¼Ÿ</h3>
            </div>
            <div id="quiz-options" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Injected via JS -->
            </div>
            <div id="quiz-feedback" class="mt-12 text-center text-4xl font-black p-12 rounded-[3rem] hidden animate-slide"></div>
            
            <div class="mt-16 flex justify-center">
                <button id="quiz-start-btn" onclick="startMission()" class="text-4xl px-20 py-10 bg-indigo-600 hover:bg-indigo-500 text-white rounded-[4rem] font-black shadow-2xl transition hover:scale-105">
                    é–‹å§‹ä»»å‹™ START
                </button>
            </div>
        </div>
    </section>

    <!-- Section 4: Writing Lab 3.0 -->
    <section class="mb-40">
        <div class="text-center mb-16">
            <h2 class="text-6xl font-black text-white bg-orange-600 px-20 py-8 rounded-[4rem] shadow-2xl inline-block transform -rotate-1">
                ğŸ—ï¸ è­°è«–æ–‡æ§‹å»ºå¯¦é©—å®¤ (v3.0)
            </h2>
        </div>

        <div class="bg-slate-900 rounded-[5rem] shadow-2xl overflow-hidden border-8 border-slate-800">
            <!-- Attack/Counter Toggles -->
            <div class="flex bg-slate-950 p-4">
                <button id="tab-attack" onclick="setMode('attack')" class="flex-1 py-12 text-5xl font-black rounded-[3.5rem] bg-orange-600 text-white shadow-xl transition">
                    ğŸ”¥ è«–é»é€²æ”»
                </button>
                <button id="tab-counter" onclick="setMode('counter')" class="flex-1 py-12 text-5xl font-black rounded-[3.5rem] text-slate-500 hover:bg-slate-800 transition">
                    ğŸ›¡ï¸ é‚è¼¯åæ“Š
                </button>
            </div>

            <div class="p-12 md:p-24">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-16 mb-24">
                    <div class="space-y-10">
                        <label class="text-3xl font-black text-slate-500 uppercase">1. ç«‹å ´ (Top Bun)</label>
                        <div id="lab-s1" class="space-y-8"></div>
                    </div>
                    <div class="space-y-10">
                        <label class="text-3xl font-black text-slate-500 uppercase">2. è«–é»/æ“š (Filling)</label>
                        <div id="lab-s2" class="space-y-8"></div>
                    </div>
                    <div class="space-y-10">
                        <label class="text-3xl font-black text-slate-500 uppercase">3. åƒ¹å€¼ (Sauce)</label>
                        <div id="lab-s3" class="space-y-8"></div>
                    </div>
                </div>

                <!-- Live Output -->
                <div class="bg-black p-20 rounded-[4rem] border-8 border-orange-500/50 relative shadow-inner">
                    <div class="flex justify-between items-center mb-12">
                        <h4 class="text-orange-500 font-black text-5xl flex items-center">
                            <span class="mr-6">ğŸ“„</span> ç”Ÿæˆå ±å‘Šé è¦½
                        </h4>
                        <button onclick="copyDraft()" class="bg-orange-600 hover:bg-orange-500 text-white px-12 py-6 rounded-[2.5rem] text-3xl font-black shadow-xl transition">
                            è¤‡è£½å ±å‘Š
                        </button>
                    </div>
                    <div id="final-out" class="text-5xl md:text-6xl text-slate-200 leading-[1.5] font-medium min-h-[400px]">
                        è«‹åœ¨ä¸Šæ–¹é¸æ“‡å…§å®¹ä»¥çµ„å»ºä½ çš„ã€Œè«–è­‰ä¸‰æ–‡æ²»ã€å ±å‘Š...
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="text-center py-24 border-t-8 border-slate-900">
        <p class="text-5xl font-black text-emerald-500 italic mb-6 tracking-tighter">MISSION ACCOMPLISHED v3.0</p>
        <p class="text-2xl text-slate-600 font-bold">çµåˆå…¨çƒæ”¿ç­–åˆ†æã€æ•¸æ“šé©…å‹•èˆ‡åœ‹å®¶å®‰å…¨åƒ¹å€¼è§€æ•™å­¸</p>
    </footer>

    <!-- Scripts -->
    <script>
        // --- 1. INTEL DATA ---
        const intel = {
            france: { f: 'ğŸ‡«ğŸ‡·', c: 'æ³•åœ‹', s: 'ç¦æ­¢', d: 'ç«‹æ³•ç¦æ­¢æ‰‹æ©Ÿï¼Œå°‡å­¸æ ¡æ‰“é€ ç‚ºã€Œæ•¸ç¢¼é¿é¢¨æ¸¯ã€ï¼Œä¿è­·å­¸ç”Ÿå…å—éœ¸å‡Œèˆ‡æˆç™®ä¾µå®³ã€‚', v: 'èº«å¿ƒå¥åº·ã€ç´€å¾‹' },
            china: { f: 'ğŸ‡¨ğŸ‡³', c: 'ä¸­åœ‹', s: 'é™åˆ¶', d: 'ã€Œäº”é …ç®¡ç†ã€è¦å®šï¼šåŸå‰‡ä¸Šç¦æ­¢å¸¶æ‰‹æ©Ÿå…¥æ ¡ï¼Œä¿è­·è¦–åŠ›ä¸¦é˜²æ­¢æ²‰è¿·ã€‚', v: 'è‡ªå¾‹ã€åœ‹å®¶æœªä¾†' },
            netherlands: { f: 'ğŸ‡³ğŸ‡±', c: 'è·è˜­', s: 'ç¦æ­¢', d: 'ç¦æ­¢èª²å ‚ä½¿ç”¨å¾Œï¼Œå­¸ç”Ÿåœ¨å°æ¯çš„çœŸå¯¦äº’å‹•é¡¯è‘—å¢åŠ ï¼Œæ”¹å–„æ ¡åœ’æ°›åœã€‚', v: 'ç¾¤é«”ç”Ÿæ´»ã€å°ˆæ³¨' },
            singapore: { f: 'ğŸ‡¸ğŸ‡¬', c: 'æ–°åŠ å¡', s: 'é™åˆ¶', d: 'å°‡æ”¿ç­–æ“´å¤§è‡³æ•´å€‹ä¸Šå­¸æ—¥ï¼Œå¼·åˆ¶å­¸ç”Ÿé€²è¡Œé¢å°é¢ç¤¾äº¤ï¼ŒåŸ¹é¤Šæ•¸ç¢¼ç¿’æ…£ã€‚', v: 'ç¤¾äº¤èƒ½åŠ›ã€å¥åº·ç”Ÿæ´»' },
            uk: { f: 'ğŸ‡¬ğŸ‡§', c: 'è‹±åœ‹', s: 'ç¦æ­¢', d: 'è³¦äºˆæ•™å¸«æœæŸ¥æ¬Šï¼Œå°‡æ‰‹æ©Ÿè¦–ç‚ºç ´å£ç§©åºçš„æºé ­ï¼Œå…¨åŠ›é‡å»ºæ ¡åœ’æ¬Šå¨ã€‚', v: 'å°Šé‡æ¬Šå¨ã€ç§©åº' },
            estonia: { f: 'ğŸ‡ªğŸ‡ª', c: 'æ„›æ²™å°¼äº', s: 'é–‹æ”¾', d: 'è¦–æ‰‹æ©Ÿç‚ºå­¸ç¿’ AI çš„å…¥å£ã€‚èªç‚ºç¦æ­¢æ‰‹æ©Ÿç­‰æ–¼èˆ‡æœªä¾†è„«ç¯€ï¼Œå¼·èª¿è‡ªä¸»å­¸ç¿’ã€‚', v: 'å‰µæ–°ã€è‡ªä¸»å­¸ç¿’' },
            usa: { f: 'ğŸ‡ºğŸ‡¸', c: 'ç¾åœ‹', s: 'å¹³è¡¡', d: 'å› å®¶é•·å®‰å…¨ç„¦æ…®éœ€ç·Šæ€¥è¯çµ¡ï¼Œæ‰‹æ©Ÿè¢«è¦–ç‚ºå½Œåˆæ•¸ç¢¼é´»æºçš„å…¬å¹³å·¥å…·ã€‚', v: 'å®‰å…¨æ„Ÿã€å…¬å¹³' },
            sweden: { f: 'ğŸ‡¸ğŸ‡ª', c: 'ç‘å…¸', s: 'å¹³è¡¡', d: 'ä½å¹´ç´šå›æ­¸ç´™æœ¬ï¼Œé«˜å¹´ç´šä½¿ç”¨æ•¸ç¢¼å·¥å…·ã€‚è­‰æ˜ç§‘æŠ€éœ€å¹³è¡¡è€Œéä¸€åˆ€åˆ‡ã€‚', v: 'å¯©è¾¯å¼æ€ç¶­ã€ä¸­åº¸' }
        };

        function reveal(id) {
            const d = intel[id];
            const box = document.getElementById('intel-box');
            box.classList.remove('hidden');
            document.getElementById('i-flag').innerText = d.f;
            document.getElementById('i-country').innerText = d.c;
            document.getElementById('i-stance').innerText = d.s;
            document.getElementById('i-desc').innerText = d.d;
            document.getElementById('i-value').innerText = d.v;
            box.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // --- 2. CHART ---
        const initChart = () => {
            const ctx = document.getElementById('pisaBigChart').getContext('2d');
            Chart.defaults.font.size = 30;
            Chart.defaults.color = '#94a3b8';
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['å°ˆæ³¨æˆ°å£«', 'ä¸€èˆ¬å­¸ç”Ÿ', 'æ‰‹æ©Ÿå–ªå±'],
                    datasets: [{
                        label: 'æ•¸å­¸èƒ½åŠ›è©•åˆ†',
                        data: [520, 500, 485],
                        backgroundColor: ['#10b981', '#3b82f6', '#ef4444'],
                        borderRadius: 30,
                        barThickness: 120
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { 
                        y: { min: 460, grid: { color: '#1e293b' } },
                        x: { ticks: { font: { size: 36, weight: '900' }, color: '#fff' } }
                    }
                }
            });
        };

        // --- 3. QUIZ SYSTEM ---
        const quizData = [
            { q: "æ ¹æ“š UNESCO æ•¸æ“šï¼Œå…¨çƒå·²æœ‰å¤šå°‘åœ‹å®¶ç«‹æ³•æˆ–æŒ‡å¼•ç¦æ­¢æ ¡åœ’ä½¿ç”¨æ‰‹æ©Ÿï¼Ÿ", o: ["10%", "24%", "50%", "80%"], a: 1, f: "âœ… æ­£ç¢ºï¼ç´„å››åˆ†ä¸€åœ‹å®¶å·²æ¡å–è¡Œå‹•ã€‚" },
            { q: "å“ªå€‹åœ‹å®¶ç«‹æ³•å°‡å­¸æ ¡å®šç¾©ç‚ºã€Œæ•¸ç¢¼é¿é¢¨æ¸¯ã€ä»¥é˜²ç¶²çµ¡æ¬ºå‡Œï¼Ÿ", o: ["è‹±åœ‹", "ä¸­åœ‹", "æ³•åœ‹", "æ–°åŠ å¡"], a: 2, f: "âœ… æ­£ç¢ºï¼æ³•åœ‹æ–¼ 2018 å¹´é€šéç›¸é—œæ³•å¾‹ã€‚" },
            { q: "ç‘å…¸è¿‘æœŸæ•™è‚²æ”¹é©çš„é‡é»æ˜¯ä»€éº¼ï¼Ÿ", o: ["å…¨é¢æ´¾ç™¼æ‰‹æ©Ÿ", "ä½å¹´ç´šå›æ­¸ç´™æœ¬æ‰‹å¯«", "å–æ¶ˆæ‰€æœ‰è€å¸«", "å…¨éƒ¨æ”¹ç”¨ AI"], a: 1, f: "âœ… æ²’éŒ¯ï¼ä»–å€‘åæ€éåº¦æ•¸ä½åŒ–å°åŸºç¤èƒ½åŠ›çš„å½±éŸ¿ã€‚" },
            { q: "æè¡›ç¶²çµ¡å®‰å…¨å’Œå€‹äººè³‡è¨Šç´ é¤Šï¼Œå°æ‡‰å“ªä¸€å€‹æ ¸å¿ƒæ¦‚å¿µï¼Ÿ", o: ["å€‹äººå–œå¥½", "ç¸½é«”åœ‹å®¶å®‰å…¨è§€", "æ‰‹æ©Ÿå“ç‰Œç«¶çˆ­", "å­¸æ ¡ç¯€é›»æ”¿ç­–"], a: 1, f: "âœ… æ­£ç¢ºï¼ç¶²çµ¡å®‰å…¨æ˜¯åœ‹å®¶å®‰å…¨çš„é‡è¦éƒ¨åˆ†ã€‚" },
            { q: "PISA ç ”ç©¶é¡¯ç¤ºï¼Œåœ¨èª²å ‚è¢«åŒå­¸æ‰‹æ©Ÿåˆ†å¿ƒçš„å­¸ç”Ÿï¼Œæ•¸å­¸åˆ†æ•¸ä¸‹é™å¤šå°‘ï¼Ÿ", o: ["2 åˆ†", "5 åˆ†", "15 åˆ†", "ä¸é™åå‡"], a: 2, f: "âœ… æ­£ç¢ºï¼15 åˆ†ç›¸ç•¶æ–¼è½å¾Œç´„åŠå¹´é€²åº¦ã€‚" }
        ];

        let quizIdx = 0;
        document.getElementById('q-total').innerText = quizData.length;

        function startMission() {
            quizIdx = 0;
            document.getElementById('quiz-start-btn').classList.add('hidden');
            renderQ();
        }

        function renderQ() {
            const d = quizData[quizIdx];
            document.getElementById('q-current').innerText = quizIdx + 1;
            document.getElementById('q-progress').style.width = ((quizIdx + 1) / quizData.length * 100) + "%";
            
            document.getElementById('quiz-text').innerText = d.q;
            const box = document.getElementById('quiz-options');
            box.innerHTML = '';
            d.o.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "text-4xl p-10 bg-slate-800 border-4 border-slate-700 rounded-[3rem] text-left hover:bg-slate-700 font-bold transition-all";
                btn.innerText = opt;
                btn.onclick = () => checkQ(idx);
                box.appendChild(btn);
            });
            document.getElementById('quiz-feedback').classList.add('hidden');
        }

        function checkQ(idx) {
            const d = quizData[quizIdx];
            const feed = document.getElementById('quiz-feedback');
            feed.classList.remove('hidden');
            if(idx === d.a) {
                feed.className = "mt-12 text-center text-5xl font-black p-12 rounded-[3.5rem] bg-emerald-600 text-white shadow-2xl";
                feed.innerText = d.f;
                setTimeout(() => {
                    quizIdx++;
                    if(quizIdx < quizData.length) renderQ();
                    else {
                        document.getElementById('quiz-text').innerText = "ğŸ† ä»»å‹™å®Œæˆï¼ä½ å·²ç²å¾—ç‰¹å·¥å¯«ä½œæˆæ¬Šã€‚";
                        document.getElementById('quiz-options').innerHTML = '';
                    }
                }, 2500);
            } else {
                feed.className = "mt-12 text-center text-5xl font-black p-12 rounded-[3.5rem] bg-red-600 text-white shadow-2xl";
                feed.innerText = "âŒ é‚è¼¯éŒ¯èª¤ï¼Œå†åˆ†æä¸€ä¸‹æƒ…å ±ï¼";
            }
        }

        // --- 4. WRITING LAB ---
        let mode = 'attack';
        const picks = { s1:'', s2:'', s3:'' };
        const labData = {
            attack: {
                s1: [
                    { id:'a1_1', text: "æˆ‘èªç‚ºå­¸æ ¡æ‡‰è©²åš´æ ¼ç¦æ­¢æ”œå¸¶æ‰‹æ©Ÿå…¥æ ¡ã€‚" },
                    { id:'a1_2', text: "æˆ‘æ”¯æŒæ ¡åœ’æ‡‰å¯¦æ–½ã€Œæ•¸ç¢¼é¿é¢¨æ¸¯ã€æ”¿ç­–ï¼Œé™åˆ¶æ‰‹æ©Ÿä½¿ç”¨ã€‚" }
                ],
                s2: [
                    { id:'a2_1', text: "ä»¥æ³•åœ‹åŠè·è˜­ç‚ºä¾‹ï¼Œç¦ä»¤æœ‰æ•ˆé˜²æ­¢äº†ç¶²çµ¡æ¬ºå‡Œï¼Œä¸¦é¡¯è‘—å¢åŠ äº†å­¸ç”Ÿçš„çœŸå¯¦ç¤¾äº¤äº’å‹•ã€‚" },
                    { id:'a2_2', text: "æ ¹æ“š PISA æ•¸æ“šï¼Œæ‰‹æ©Ÿåˆ†å¿ƒæœƒå°è‡´æ•¸å­¸æˆç¸¾ä¸‹é™ 15 åˆ†ï¼Œè­‰æ˜æ‰‹æ©Ÿæ˜¯èª²å ‚å°ˆæ³¨åŠ›çš„æ®ºæ‰‹ã€‚" }
                ],
                s3: [
                    { id:'a3_1', text: "é€™é«”ç¾äº†è‡ªå¾‹çš„é‡è¦æ€§ã€‚å­¸æœƒä½•æ™‚ã€Œæ”¾ä¸‹æ‰‹æ©Ÿã€ï¼Œæ˜¯æ¯”æ‹¿èµ·æ‰‹æ©Ÿæ›´é‡è¦çš„ç¾ä»£ç´ é¤Šã€‚" },
                    { id:'a3_2', text: "é€™æœ‰åŠ©æ–¼ç¶­è­·æ³•ç´€èˆ‡æ ¡åœ’ç©©å®šï¼Œè®“å­¸ç”Ÿåœ¨å¥åº·çš„æ•¸ç¢¼ç’°å¢ƒä¸­æˆé•·ç‚ºè² è²¬ä»»çš„å…¬æ°‘ã€‚" }
                ]
            },
            counter: {
                s1: [
                    { id:'c1_1', text: "æœ‰äººèªç‚ºæ‰‹æ©Ÿæ˜¯ç§æœ‰è²¡ç”¢ï¼Œå­¸æ ¡ç„¡æ¬Šæ²’æ”¶ï¼Œä½†æˆ‘èªç‚ºé›†é«”å­¸ç¿’æ¬Šå„ªæ–¼å€‹äººè‡ªç”±ã€‚" },
                    { id:'c1_2', text: "é›–ç„¶å®¶é•·æ“”å¿ƒç·Šæ€¥è¯çµ¡å•é¡Œï¼Œä½†æˆ‘èªç‚ºçœŸæ­£çš„å®‰å…¨ä¾†è‡ªå­¸æ ¡ç³»çµ±è€Œéå€‹äººè£ç½®ã€‚" }
                ],
                s2: [
                    { id:'c2_1', text: "æ­£å¦‚æ–°åŠ å¡çš„æ”¿ç­–é¡¯ç¤ºï¼ŒçœŸæ­£çš„å®‰å…¨ä¾†è‡ªæ–¼å°ç¨‹åºå’Œç³»çµ±çš„ä¿¡ä»»èˆ‡éµå®ˆï¼Œè€Œéä¾è³´æ‰‹æ©Ÿå‚³æ’­æ¶ˆæ¯ã€‚" },
                    { id:'c2_2', text: "ç‘å…¸çš„ä¾‹å­å‘Šè¨´æˆ‘å€‘ï¼Œéåº¦ä¾è³´ç§‘æŠ€åè€Œæœƒå‰Šå¼±åŸºç¤èƒ½åŠ›ã€‚è‡ªå¾‹æ‰æ˜¯æˆç‚ºç§‘æŠ€ä¸»äººçš„é—œéµã€‚" }
                ],
                s3: [
                    { id:'c3_1', text: "å› æ­¤ï¼Œå»ºç«‹ç´€å¾‹ä¸¦éä¾µçŠ¯è‡ªç”±ï¼Œè€Œæ˜¯ç‚ºäº†ä¿è­·æ‰€æœ‰äººéƒ½èƒ½äº«æœ‰ä¸å—å¹²æ“¾çš„å…¬å¹³å­¸ç¿’æ©Ÿæœƒã€‚" },
                    { id:'c3_2', text: "é€™é«”ç¾äº†å®ˆæ³•ç²¾ç¥èˆ‡åœ‹æ°‘ç´ è³ªï¼Œå”¯æœ‰æ³¨æ„åŠ›é›†ä¸­çš„ç¾¤é«”ï¼Œæ‰èƒ½æ‡‰å°æœªä¾†çš„åœ‹é˜²èˆ‡ç™¼å±•æŒ‘æˆ°ã€‚" }
                ]
            }
        };

        function setMode(m) {
            mode = m;
            document.getElementById('tab-attack').className = m === 'attack' ? 'flex-1 py-12 text-5xl font-black rounded-[3.5rem] bg-orange-600 text-white shadow-xl transition' : 'flex-1 py-12 text-5xl font-black rounded-[3.5rem] text-slate-500 hover:bg-slate-800 transition';
            document.getElementById('tab-counter').className = m === 'counter' ? 'flex-1 py-12 text-5xl font-black rounded-[3.5rem] bg-indigo-600 text-white shadow-xl transition' : 'flex-1 py-12 text-5xl font-black rounded-[3.5rem] text-slate-500 hover:bg-slate-800 transition';
            picks.s1 = ''; picks.s2 = ''; picks.s3 = '';
            renderLab();
            updateOut();
        }

        function renderLab() {
            const d = labData[mode];
            ['s1', 's2', 's3'].forEach(s => {
                const box = document.getElementById('lab-' + s);
                box.innerHTML = d[s].map(o => `
                    <div id="${o.id}" class="p-8 border-4 border-slate-700 rounded-[2.5rem] text-2xl font-bold text-slate-400 cursor-pointer hover:border-orange-500 transition-all leading-snug" onclick="pick('${s}', '${o.id}', '${o.text}')">
                        ${o.text}
                    </div>
                `).join('');
            });
        }

        function pick(s, id, t) {
            const d = labData[mode];
            d[s].forEach(o => document.getElementById(o.id)?.classList.remove('writing-option-active'));
            document.getElementById(id).classList.add('writing-option-active');
            picks[s] = t;
            updateOut();
        }

        function updateOut() {
            const out = document.getElementById('final-out');
            const full = (picks.s1 + " " + picks.s2 + " " + picks.s3).trim();
            out.innerHTML = full || "è«‹åœ¨ä¸Šæ–¹é¸æ“‡æ¨¡çµ„ä»¥çµ„å»ºä½ çš„ã€Œè«–è­‰ä¸‰æ–‡æ²»ã€å ±å‘Š...";
        }

        function copyDraft() {
            const t = document.getElementById('final-out').innerText;
            if(t.length < 5) return;
            navigator.clipboard.writeText(t);
            alert("âœ¨ å ±å‘Šå·²è¤‡è£½ï¼å¯ç”¨æ–¼æäº¤æˆ–æœ—è®€ã€‚");
        }

        window.onload = () => {
            initChart();
            renderLab();
        };
    </script>
</body>
</html>
